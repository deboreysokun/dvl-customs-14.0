<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--Shipment Operation Form View-->
        <record id="view_shipment_operation_form" model="ir.ui.view">
            <field name="name">shipment operation form</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <form string="Shipment Operation" disable_autofocus='false'>
                    <header>
                        <widget name="attach_document" string="Add Operation Attachment" action="message_post"
                            highlight="1" attrs="{'invisible': [('id','=',False)]}"/>
                        <field name="stage_id" widget="statusbar"
                            options="{'clickable': '1', 'fold_field': 'fold'}"
                            attrs="{'invisible': [('active', '=', False)]}"/>
                        <button name="action_preview_import_documents"
                            type="object" string="Preview Document" icon="fa-search"
                            attrs="{'invisible': [('operation_type', '!=', 'import')]}"/>
                        <button name="action_preview_export_documents"
                            type="object" string="Preview Document" icon="fa-search"
                            attrs="{'invisible': [('operation_type', '!=', 'export')]}"/>
                        <button name="action_preview_transit_documents"
                            type="object" string="Preview Document" icon="fa-search"
                            attrs="{'invisible': [('operation_type', '!=', 'transit')]}"/>
                        <button class="btn btn-primary" name="action_to_review" string="Request Review" type="object"
                            attrs="{'invisible': [('to_review', '=', True)]}"/>
                        <button class="btn btn-primary" name="%(devel_logistic_management.operation_shipment_review_done_action)d" string="Review Done" type="action"
                                attrs="{'invisible': ['|',('review_done', '=', True),('to_review', '=', False)]}"/>
                        <button class="btn btn-primary" name="action_get_attachment_accounting_view" type="object" string="All Attachments"
                            groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                    </header>
                    <sheet>
                        <div name="button_box" class="oe_button_box">
                            <button name="action_get_attachment_operation_view"
                                class="oe_stat_button"
                                icon="fa-file-text-o"
                                type="object">
                                <field name="attachment_operation_number" widget="statinfo" string="Operation Files" options="{'reload_on_button': true}"/>
                            </button>
                            <button type="object" class="oe_stat_button" icon="fa-dollar" name="action_view_invoice"
                                context="{'default_shipment_id': active_id}" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <div class="o_form_field o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="total_invoices" widget='monetary' options="{'currency_field': 'company_currency_id'}" decoration-success="total_invoices &gt; 0"/>
                                    </span>
                                    <span class="o_stat_text">Revenues</span>
                                </div>
                            </button>

                            <button type="object" class="oe_stat_button" icon="fa-dollar" name="action_view_reimbursed_invoice"
                                context="{'default_shipment_id': active_id}" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <div class="o_form_field o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="total_reimbursed_invoice" decoration-success="total_reimbursed_invoice &gt; 0"/>
                                    </span>
                                    <span class="o_stat_text">Receive Reimbursed</span>
                                </div>
                            </button>
                            <button type="object" class="oe_stat_button" icon="fa-dollar" name="action_view_reimbursed_reciept"
                                context="{'default_shipment_id': active_id}" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <div class="o_form_field o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="total_reimbursed_reciept" decoration-danger="total_reimbursed_reciept &lt; 0"/>
                                    </span>
                                    <span class="o_stat_text">Pay Reimbursed</span>
                                </div>
                            </button>
                        </div>
                        <field class="oe_right" name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                        <field name="active" invisible="1"/>
                        <field name="id" invisible="1"/>
                        <field name="to_review" invisible="1"/>
                        <field name="review_done" invisible="1"/>
                        <field name="is_locked" invisible="1"/>

                        <h1>
                            <field name="name" class="oe_inline" placeholder="eg.IMP2021/01/0001"/>
                        </h1>
                        <field name="create_uid" widget="many2one_avatar_user"/>

                        <group col="10" string="Operation">
                            <group colspan="3" col="3">
                                <field name="date" attrs="{'readonly': [('is_locked', '=', True)]}" string="1 Date"/>
                                <field name="operation_type" attrs="{'readonly': [('id', '!=', False)], 'required': [('id', '=', False)]}" string="2 Type"/>
                                <field name="transportation_mode" widget="radio" attrs="{'readonly': [('id', '!=', False)]}" string="2A Transportation"/>
                                <field name="shipment_type_id" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}" string="3 Shipment Type"/>
                                <field name="verify_user_id" options="{'no_open': True,'no_create_edit': True}"
                                    attrs="{'readonly':[('review_done','=', True)]}" string="4 Review by"/>
                                <field name="verify_date" attrs="{'invisible': [('review_done', '=', False)]}"/>
                                <field name="review_comment" attrs="{'invisible': [('review_comment', '=', False)]}"/>
                                <field name="company_id" groups="base.group_multi_company" readonly="1"/>
                            </group>
                            <group colspan="3" col="3">
                                <field name="customer_id" string="5 Client"/>
                                <field name="commodity" string="6 Commodity"/>
                                <field name="container_qty_type"/>
                                <field name="truck_container" string="Containers &amp; Truck No." widget="text"/>
                                <field name="x_image_logo"/>
                            </group>
                            <group class="oe_subtotal_footer oe_right" colspan="3" name="operation_total_cash" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <label for="total_cash_received" string="Cash Received"/>
                                <button style="padding:1px" type="object" class="oe_stat_button" name="action_view_cash_received" context="{'default_shipment_id': active_id}" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                    <field name="total_cash_received" string="Cash Received" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                </button>

                                <label for="total_expensed" string="Cash Paid"/>
                                <button style="padding:2px" type="object" class="oe_stat_button" name="action_view_cash_paid_lines" context="{'default_shipment_id': active_id}" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                  <field name="total_expensed" string="Cash Paid" widget="monetary" options="{'currency_field': 'company_currency_id'}" decoration-danger="total_expensed &lt; 0"/>
                                </button>

                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="cash_balance"/>
                                </div>
                                <field name="cash_balance" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"
                                    options="{'currency_field': 'company_currency_id'}" decoration-danger="cash_balance &lt; 0" decoration-success="cash_balance &gt; 0"/>
                            </group>
                            <group class="oe_subtotal_footer oe_right" colspan="3" name="operation_total" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <field name="total_invoices" string="Total Revenues" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                <field name="tot_operation_expense" string="Total Expenses" widget="monetary" options="{'currency_field': 'company_currency_id'}" decoration-danger="tot_operation_expense &lt; 0"/>
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="balance"/>
                                </div>
                                <field name="balance" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"
                                    options="{'currency_field': 'company_currency_id'}" decoration-danger="balance &lt; 0" decoration-success="balance &gt; 0"/>
                            </group>
                            <div class="oe_clear"/>
                        </group>
                        <group>

                            <field name="incoterm_id" string="7 Incoterm"/>
                            <label for="internal_note" class="dvl-bg-light-orange"/>
                            <div class="o_row">
                                <field name="internal_note" class="dvl-bg-light-orange"  placeholder="Note on important information such as issues, remark, ...etc"/>
                            </div>
                        </group>
                        <notebook>
                            <page id="info_tab" string="Information Filling" name="info_filling">
                                <group class="oe_edit_only">
                                    <group>
                                        <field name="copy_shipment_id" domain="[('active', '=', True),('operation_type', '=', operation_type)]" options="{'no_open': True, 'no_create_edit': True, 'no_quick_create': True}"
                                            attrs="{'readonly': [('is_locked', '=', True)]}"
                                            context="{
                                                'show_commodity': 1,
                                                'show_client_name': 1,
                                                'search_view_ref': 'devel_logistic_management.view_shipment_operation_search',
                                                'tree_view_ref': 'devel_logistic_management.view_shipment_operation_tree'}" string="8 Copy From Shipment"/>
                                    </group>
                                </group>
                                <group string="General Information">
                                    <group>
                                        <field name="shipper_id" context="{'show_address': 1, 'show_vat': True}" options='{"always_reload": True, "no_quick_create": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="9 Shipper"/>
                                        <field name="consignee_id" context="{'show_address': 1, 'show_vat': True}" options='{"always_reload": True, "no_quick_create": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="10 Consignee"/>

                                    </group>
                                    <group>
                                        <field name="notify_party_id" context="{'show_address': 1, 'show_vat': True}" options='{"always_reload": True, "no_quick_create": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="14 Notify Party"/>
                                        <field name="customer_id" context="{'show_address': 1, 'show_vat': True}" options='{"always_reload": True, "no_quick_create": True}' attrs="{'readonly': [('is_locked', '=', True)], 'required': [('id', '=', False)]}" string="15 Client"/>
                                    </group>
                                    <group>
                                        <field name="export_country_id" attrs="{'invisible': [('operation_type','=','export')], 'readonly': [('is_locked', '=', True)]}" options='{"no_create": True}' string="11 Export Country"/>
                                        <field name="import_country_id" attrs="{'invisible': [('operation_type','=','import')], 'readonly': [('is_locked', '=', True)]}" options='{"no_create": True}' string="11A Import Country"/>
                                        <field name="origin_country_id" options='{"no_create": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="12 Country Of Origin"/>
                                        <field name="incoterm_id" context="{'show_full_name': 1}" options='{"always_reload": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="13 Incoterm"/>
                                    </group>
                                    <group>
                                        <field name="entry_exit_port_id" context="{'show_khmer_name': 1}" options='{"always_reload": True}' attrs="{'invisible': [('operation_type','=','transit')], 'readonly': [('is_locked', '=', True)]}" string="16 Entry/Exit Port"/>
                                        <field name="entry_exit_port_id" context="{'show_khmer_name': 1}" options='{"always_reload": True}' string="16 Entry Port" attrs="{'invisible': [('operation_type','!=','transit')], 'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="exit_port_id" context="{'show_khmer_name': 1}" options='{"always_reload": True}' attrs="{'invisible': [('operation_type','!=','transit')], 'readonly': [('is_locked', '=', True)]}" string="16A Exit Port"/>
                                        <field name="clearance_office_id" context="{'show_khmer_name': 1}" options='{"always_reload": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="17 Clearance Office"/>
                                        <field name="valuation_office_id" context="{'show_khmer_name': 1}" options='{"always_reload": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="18 Valuation Office"/>
                                    </group>
                                </group>
                                <group string="Carrier Information">
                                    <group>
                                        <field name="co_loader_id" options='{"no_quick_create": True}' invisible="1" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="shipping_line_id" options='{"no_quick_create": True}' attrs="{'readonly': [('is_locked', '=', True)]}" string="19 Shipping Line"/>
                                        <label for="bl_number" string="20A MBL or Booking N0." attrs="{'invisible': [('operation_type','!=','import')]}"/>
                                        <div class="o_row" attrs="{'invisible': [('operation_type','!=','import')]}">
                                            <field name="bl_number" placeholder="MBL or Booking N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="bl_date" placeholder="BL Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="hbl_number" string="20 HBL N0."/>
                                        <div class="o_row">
                                            <field name="hbl_number" placeholder="HBL N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="hbl_date" placeholder="HBL Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="truck_bill_number" string="21 Truck Bill NO."/>
                                        <div class="o_row">
                                            <field name="truck_bill_number" placeholder="Truck Bill N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_date" placeholder="Truck Bill Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                    </group>
                                    <group>
                                        <field name="internal_seal_number" attrs="{'readonly': [('is_locked', '=', True)]}" string="22 Internal Seal NO."/>
                                        <field name="customs_seal_number" attrs="{'readonly': [('is_locked', '=', True)]}" string="23 Customs Seal NO."/>
                                        <field name="port_of_loading_carrier" string="24 Port Of Loading" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="port_of_discharge_carrier" string="25 Port Of Discharge" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="container_number" invisible="1" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="seal_number" invisible="1" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <label for="etd" string="26 ETD | ETA | ETR"/>
                                        <div class="o_row">
                                            <span class="oe_read_only"> ETD: </span>
                                            <field name="etd" placeholder="ETD" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <span class="oe_read_only"> | ETA:  </span>
                                            <field name="eta" placeholder="ETA" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <span class="oe_read_only"> | ETR: </span>
                                            <field name="etr" placeholder="ETR" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                    </group>
                                </group>

                                <group string="Invoice and Package List">
                                    <group>
                                        <label for="inv_pack_number" string="27 INV and PL N0."/>
                                        <div class="o_row">
                                            <field name="inv_pack_number" placeholder="INV and Packing List Number" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pack_date" placeholder="Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="inv_packing_list_term" context="{'show_full_name': 1}" options='{"always_reload": True}' string="28 INV Incoterm" placeholder="eg: CIF" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <label for="commodity" string="29 Commodity"/>
                                        <div class="o_row">
                                            <field name="commodity" placeholder="English" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="commodity_khmer" placeholder="Khmer" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="is_vehicle" attrs="{'readonly': [('is_locked', '=', True)]}" string="30 Is Vehicle"/>
                                        <field name="mix_commodity" attrs="{'readonly': [('is_locked', '=', True)]}" string="31 Mix Commodity?"/>
                                        <field name="x_country_option" string="32 Country Option"/>
                                    </group>
                                    <group attrs="{'invisible': [('operation_type','!=','import')]}">
                                        <field name="co_form_id" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}" string="32A CO Form"/>
                                        <label for="co_form_date" string="32B CO Form Date"/>
                                        <div class="o_row">
                                            <field name="co_form_date" placeholder="Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="co_form_country_id" placeholder="Country of CO Form" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="co_form_number" placeholder="eg. 203203123123" attrs="{'readonly': [('is_locked', '=', True)]}" string="32C CO Form NO."/>
                                    </group>
                                </group>
                                <!-- Invoice and Packing List -->
                                <field name="line_ids" attrs="{'readonly': [('is_locked', '=', True)]}">
                                    <tree editable="bottom" decoration-bg-purple="id == False">
                                        <field name="is_vehicle" invisible="1"/>
                                        <field name="mix_commodity" invisible="1"/>
                                        <field name="description"/>
                                        <field name="description_khmer" optional="hide" />
                                        <field name="qty" sum="Total QTY" string="QTY"/>
                                        <field name="uom_id" context="{'show_full_name': 1}" options="{'no_create': True}" string="UOM" class="o_list_number_th"/>
                                        <field name="packing_list_qty" sum="Total PL QTY" string="PL QTY"/>
                                        <field name="packing_list_uom_id" context="{'show_full_name': 1}"  options="{'no_create': True}" string="PL UOM" placeholder="PL UOM" class="o_list_number_th"/>
                                        <field name="number" optional="show" class="o_list_number_th"/>
                                        <field name="number_in_co" attrs="{'column_invisible': [('parent.co_form_id','=', False)]}" optional="show" class="o_list_number_th"/>
                                        <field name="price_unit" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="price_subtotal" sum="Total Amount" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                        <field name="price_subtotal_fob" sum="FOB Amount" widget="monetary" options="{'currency_field': 'company_currency_id'}"
                                            attrs="{'column_invisible': [('parent.co_form_id','=', False)]}" optional="show" class="o_list_number_th"/>
                                        <field name="co_criteria" attrs="{'column_invisible': [('parent.co_form_id','=', False)]}" optional="show"/>
                                        <field name="net_weight" sum="Total N.Weight"/>
                                        <field name="gross_weight" sum="Total G.Weight"/>
                                        <field name="price_per_kg" sum="Price Per Kg" optional="show" digits="[42,3]"/>
                                        <field name="item_manufacturing_date" attrs="{'column_invisible': ['&amp;',('parent.is_vehicle','=', True),('parent.mix_commodity','=', False)]}"/>
                                        <field name="item_expiry_date" attrs="{'column_invisible': ['&amp;',('parent.is_vehicle','=', True),('parent.mix_commodity','=', False)]}"/>
                                        <field name="wheel_type" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="origin_country_id" options='{"no_open": True, "no_create": True}'/>
                                        <field name="v_type" options="{'no_create': True}" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="new_used" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_vin" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_eng" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_brand" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_model" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_power_mode" options="{'no_create': True}" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_gvw" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_model_year" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_capacity" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_left_hand_drive" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="v_other_info" attrs="{'column_invisible': [('parent.is_vehicle','=', False),('parent.mix_commodity','=', False)]}"/>
                                        <field name="hs_code_id" options="{'no_create': True}" class="o_list_number_th"/>
                                        <field name="remark_hs_code" string="HS Code 2017" optional="hide" placeholder="eg: HS Code 2017" class="o_list_number_th"/>
                                        <field name="cd" optional="hide" string="CD" class="o_list_number_th"/>
                                        <field name="st" optional="hide" string="ST" class="o_list_number_th"/>
                                        <field name="vat" optional="hide" string="VAT" class="o_list_number_th"/>
                                        <field name="tax_rate" optional="hide" class="o_list_number_th"/>
                                        <field name="fta" optional="show" string="FTA %" class="o_list_number_th"/>
                                        <field name="tax_rate_co" optional="hide" class="o_list_number_th" string="CO Rate%"/>
                                        <field name="new_tax_rate" optional="show" class="o_list_number_th"/>
                                        <field name="tax_amount" sum="Duty Tax" optional="show" string="Duty Tax" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                        <field name="tax_amount_co" sum="Tax CO" optional="show" string="Tax CO" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                        <field name="ministry_info" widget="dynamic_popover_text" options="{'max_width': '350px'}" optional="show"/>
                                    </tree>
                                </field>
                                <button name="export_inv_packing_line" string="Export In Customs Format" type="object" default_focus="1" class="oe_highlight"/>
                                <button name="%(devel_logistic_management.import_inv_pl_wizard_action)d" string="Import Line" type="action" class="btn btn-primary" style="margin-left:10px"
                                    attrs="{'invisible': [('is_locked','=',True)]}"/>
                                <label for="inv_pl_template" string="Template" style="margin-left:10px"/>
                                <field name="inv_pl_template" style="margin-left:5px"/>
                                <group>
                                    <group string="Information">
                                        <label for="total_gross_weight" string="33 Total Gross Weight"/>
                                        <div class="o_address_format">
                                            <field name="total_gross_weight" class="o_address_city"/>
                                            <field name="gross_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="total_net_weight" string="34 Total Net Weight"/>
                                        <div class="o_address_format">
                                            <field name="total_net_weight" class="o_address_city"/>
                                            <field name="net_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="total_qty" string="35 Total INV QTY"/>
                                        <div class="o_address_format">
                                            <field name="total_qty" class="o_address_city"/>
                                            <field name="inv_qty_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="total_pl_qty" string="36 Total PL QTY"/>
                                        <div class="o_address_format">
                                            <field name="total_pl_qty" class="o_address_city"/>
                                            <field name="qty_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="qty_text" class="o_address_city" placeholder="eg. = 600 unit" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="total_amount" string="Total Amount" widget="monetary"
                                            options="{'currency_field': 'company_currency_id'}"/>
                                        <label for="total_tax_amount" string="Tax Amount"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': ['|',('total_tax_amount','=', 0),('is_locked', '=', True)]}" context="{'tax_amount':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                        <label for="total_tax_amount_co" string="Cutoff Tax Amount CO"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount_co" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': ['|',('total_tax_amount_co','=', 0), ('is_locked', '=', True)]}" context="{'tax_amount_co':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                    </group>
                                    <group string="Actual Information">
                                        <label for="actual_gross_weight" string="37 Actual Gross Weight"/>
                                        <div class="o_address_format">
                                            <field name="actual_gross_weight" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="actual_gross_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="actual_net_weight" string="38 Actual Net Weight"/>
                                        <div class="o_address_format">
                                            <field name="actual_net_weight" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="actual_net_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="actual_qty" string="39 Actual Total QTY"/>
                                        <div class="o_address_format">
                                            <field name="actual_qty" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="actual_qty_uom_id" context="{'show_full_name': 1}" placeholder="UOM" class="o_address_state" options="{'no_create': True}" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                    </group>
                                </group>
                                <group>
                                    <group string="Customs Penalty Information" attrs="{'invisible': [('operation_type','!=','import')]}">
                                        <label for="penalty_rate_charge" string="39A Penalty Rate Charge"/>
                                        <div class="o_address_format">
                                            <field name="penalty_rate_charge" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <span class="o_form_label oe_inline">%</span>
                                        </div>
                                        <field name="customs_penalty_price" widget="monetary" attrs="{'readonly': [('is_locked', '=', True)]}"
                                        options="{'currency_field': 'company_currency_id'}" string="39B Customs Penalty"/>
                                    </group>
                                </group>

                                <group string="List of Containers">
                                    <group>
                                        <field name="num_of_truck" attrs="{'readonly': [('is_locked', '=', True)]}" string="40 Number of Truck"/>
                                    </group>
                                </group>
                                <field name="container_line_ids" nolabel="1" attrs="{'readonly': [('is_locked', '=', True)]}">
                                    <tree editable="bottom" class="tariff_center">
                                        <field name="shipment_id" invisible="1"/>
                                        <field name="container_type_id" options="{'no_create': True}"/>
                                        <field name="container_number" class="o_list_number_th"/>
                                        <field name="container_charge_type_id"/>
                                        <field name="custom_seal_no" class="o_list_number_th"/>
                                        <field name="container_seal_number" class="o_list_number_th"/>
                                        <field name="company_seal_no" class="o_list_number_th"/>
                                        <field name="e_f" optional="hide"/>
                                        <!--package here is uom_id -->
                                        <field name="package" context="{'show_full_name': 1}" string="UOM" options="{'no_create': True}" optional="show" class="o_list_number_th"/>
                                        <field name="weight" optional="show" sum="Total Empyt Weight"/>
                                        <field name="gross_weight" optional="show" sum="Tot. GW"/>
                                        <field name="actual_gross_weight" optional="show" sum="Actual GW"/>
                                        <field name="transportation" optional="hide" class="o_list_number_th"/>
                                        <field name="remark" optional="hide" class="o_list_number_th"/>
                                        <field name="eta" optional="show"/>
                                        <field name="storage_charge_date" string="Storage Date Charge" optional="show"/>
                                        <field name="demurrage_charge_date" string="Demurrage Date Charge" optional="show"/>
                                        <field name="takeout_date" string="ETR" optional="show"/>
                                        <field name="return_date" optional="show"/>
                                        <field name="unit_price" sum="Totatl" string="Deposit Price" optional="show" groups="account.group_account_user"/>
                                        <field name="number_storage_days" optional="hide" groups="account.group_account_user"/>
                                        <field name="number_demurrage_days" optional="hide" groups="account.group_account_user"/>
                                        <field name="number_demurrage_days_1" optional="hide" groups="account.group_account_user"/>
                                        <field name="number_detention_days" optional="hide" groups="account.group_account_user"/>
                                        <field name="number_penalty_days" optional="hide" groups="account.group_account_user"/>

                                        <field name="number_standby_days" invisible="1" groups="account.group_account_user"/>
                                        <field name="standby_charge" invisible="1" string="StandBy" groups="account.group_account_user"/>

                                        <field name="storage_charge" string="Storage" sum="Total Storage Charge" groups="account.group_account_user" optional="show"/>
                                        <field name="demurrage_charge" string="Demurrage" sum="Total Demurrage Charge" groups="account.group_account_user" optional="show"/>
                                        <field name="detention_charge" string="Detention" sum="Total Detention Charge" groups="account.group_account_user" optional="show"/>
                                        <field name="custom_penalty_charge" string="Customs Penalty" sum="Total Custom Penalty Charge" groups="account.group_account_user" optional="show"/>
                                        <field name="total_charge" sum="Total Charge" groups="account.group_account_user" optional="show"/>
                                        <field name="currency_id" invisible='1'/>
                                    </tree>
                                </field>

                                <group string="Truck Booking">
                                </group>
                                <field name="truck_line_ids" context="{'default_shipment_id': id, 'default_operation_type': operation_type}" nolabel="1" attrs="{'readonly': [('is_locked', '=', True)]}">
                                    <tree class="tariff_center" editable="button">
                                        <field name="name" options="{'no_create': True}"/>
                                        <field name="booking_date"/>
                                        <field name="operation_type" widget="selection" optional="show"/>
                                        <field name="shipment_id" invisible="1"/>
                                        <field name="container_id" options="{'no_create': True}" class="o_list_number_th"/>
                                        <field name="container_seal_id" options="{'no_create': True}" class="o_list_number_th"/>
                                        <field name="have_product" optional="show"/>
                                        <field name="truck_type" optional="show"/>
                                        <field name="truck_number" optional="show" class="o_list_number_th"/>
                                        <field name="trailer_number" optional="show" class="o_list_number_th"/>
                                        <field name="truck_partner_id" domain="[('is_truck', '=', True)]" context="{'default_is_company': 1, 'default_is_truck': 1}"
                                            options='{"no_quick_create": True}' optional="show" class="o_list_number_th" />
                                        <field name="driver_id" optional="show" class="o_list_number_th"/>
                                        <field name="driver_number" string="Driver Number" optional="show" class="o_list_number_th"/>
                                        <field name="delivery_location_id" attrs="{'column_invisible': [('parent.operation_type','=', 'export')]}" />
                                        <field name="delivery_date" attrs="{'column_invisible': [('parent.operation_type','=', 'export')]}"/>
                                        <field name="release_empty_location_id" string="Return Empty CONT To" attrs="{'column_invisible': [('parent.operation_type','=', 'export')]}"/>
                                        <field name="release_date" string="Return Date" attrs="{'column_invisible': [('parent.operation_type','=', 'export')]}"/>
                                        <field name="pick_up_empty_location_id" attrs="{'column_invisible': [('parent.operation_type','=', 'import')]}"/>
                                        <field name="pick_up_date" attrs="{'column_invisible': [('parent.operation_type','=', 'import')]}" />
                                        <field name="loading_location_id" string="Loading/ Unloading Location" attrs="{'column_invisible': [('parent.operation_type','=', 'import')]}"/>
                                        <field name="loading_date" string="Loading/ Unloading Date" attrs="{'column_invisible': [('parent.operation_type','=', 'import')]}"/>
                                        <field name="number_standby_days" optional="show" groups="account.group_account_user"/>
                                        <field name="standby_charge" sum="Total StandBy Charge" optional="show" groups="account.group_account_user"/>
                                        <field name="currency_id" invisible="1"/>
                                    </tree>
                                </field>

                                <group string="Booking Order &amp; Truck Bill of Lading">
                                    <group>
                                        <field name="booking_date" attrs="{'readonly': [('is_locked', '=', True)]}" string="41 Booking Date"/>
                                        <label for="bl_number" string="41A MBL or Booking N0." attrs="{'invisible': [('operation_type','=','import')]}"/>
                                        <div class="o_row" attrs="{'invisible': [('operation_type','=','import')]}">
                                            <field name="bl_number"  placeholder="MBL or Booking N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="bl_date" placeholder="BL Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="volume_cbm" attrs="{'readonly': [('is_locked', '=', True)]}" string="42 Volume / CBM"/>
                                        <label for="vessel_id" string="43 Vessel/Voyage N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <div class="o_row">
                                            <field name="vessel_id" placeholder="Vessel Name" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="voyage_number" placeholder="Voyage N0." attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="freight" attrs="{'readonly': [('is_locked', '=', True)]}" string="44 Freight"/>
                                        <field name="description_of_goods" attrs="{'readonly': [('is_locked', '=', True)]}" string="45 Description of Goods"/>
                                    </group>
                                    <group>
                                        <field name="pick_up_date" attrs="{'readonly': [('is_locked', '=', True)]}" string="46 Pick Up Date"/>
                                        <field name="place_of_reciept" attrs="{'readonly': [('is_locked', '=', True)]}" string="47 Place Of Reciept"/>
                                        <field name="port_of_loading" attrs="{'readonly': [('is_locked', '=', True)]}" string="48 Port Of Loading"/>
                                        <field name="port_of_discharge" attrs="{'readonly': [('is_locked', '=', True)]}" string="49 Port Of Discharge"/>
                                        <field name="port_of_delivery" attrs="{'readonly': [('is_locked', '=', True)]}" string="50 Port of Delivery"/>
                                        <field name="final_destination" attrs="{'readonly': [('is_locked', '=', True)]}" string="51 Final Destination"/>
                                    </group>
                                </group>
                                <group string="ETD ETA PORT" attrs="{'invisible': [('operation_type','=','import')]}">
                                    <group>
                                        <label for="etd_export_port" string="51A ETD Port"/>
                                        <div class="o_address_format">
                                            <field name="etd_export_port" class="o_address_city" placeholder="Port" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="etd_export_date" class="o_address_state"  placeholder="ETD DATE" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="eta_export_port" string="51B ETA Port"/>
                                        <div class="o_address_format">
                                            <field name="eta_export_port" class="o_address_city" placeholder="Port" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="eta_export_date" class="o_address_state"  placeholder="ETA DATE" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                    </group>
                                    <group>
                                        <label for="etd_export_port_1" string="51C ETD Transit Port"/>
                                        <div class="o_address_format">
                                            <field name="etd_export_port_1" class="o_address_city" placeholder="Port" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="etd_export_date_1" class="o_address_state"  placeholder="ETD DATE" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="eta_export_port_1" string="51D ETA Transit Port"/>
                                        <div class="o_address_format">
                                            <field name="eta_export_port_1" class="o_address_city" placeholder="Port" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="eta_export_date_1" class="o_address_state"  placeholder="ETA DATE" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                    </group>
                                </group>
                                <group string="Import Documents" attrs="{'invisible': [('operation_type','!=','import')]}">
                                    <group>
                                        <label for="inv_packing_doc" string="52 Inv Packing Doc"/>
                                        <div class="o_address_format">
                                            <field name="inv_packing_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="inv_pl_stamp" string="Shipper Stamp?" attrs="{'invisible': [('inv_packing_doc','=', False)],'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp" class="o_address_state" attrs="{'invisible': [('inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="inv_pl_stamp_consignee" attrs="{'invisible': [('inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp_consignee" class="o_address_state" attrs="{'invisible': [('inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="transit_truck_bill_doc" string="53A Truck Bill"/>
                                        <div class="o_address_format">
                                            <field name="transit_truck_bill_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="truck_bill_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="truck_bill_stamp_consignee" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="authorization_doc" string="54 AUTH Trader"/>
                                        <div class="o_address_format">
                                            <field name="authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_trader_stamp" string="Shipper Stamp?" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_trader_stamp_consignee" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp_consignee" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="transit_authorization_doc" string="54A AUTH Broker"/>
                                        <div class="o_address_format">
                                            <field name="transit_authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_broker_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_broker_stamp_consignee" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <field name="owner_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54B Company's Owner"/>
                                        <field name="authorized_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54C AUTH Employee"/>
                                        <field name="customs_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54D Customs Borker"/>
                                        <label for="province_id" string="54E Province(ធ្វើនៅ)" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        <div class="o_row" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}">
                                            <field name="province_id" placeholder="Province" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="document_date" placeholder="Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="khmer_date_char" string="54F Khmer Date" placeholder="Eg. ថ្ងៃសុក្រ ៩កើត ខែផល្គុន ឆ្នាំឆ្លូវ ត្រី​ស័ក, ព.ស.​ ២៥៦៥"
                                            attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        <label for="x_form_apply_permit" string="Form Apply Permit?"/>
                                        <div class="o_address_format">
                                            <field name="x_form_apply_permit" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <div style="display: flex;">
                                              <label for="x_permit1" string="" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <field name="x_permit1" class="o_address_state" placeholder="លិខិតអនុញ្ញាតលេខ........." attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <label for="x_permit_date1" string="" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <field name="x_permit_date1" class="o_address_state" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            </div>
                                            <div style="display: flex;">
                                              <label for="x_permit2" string="" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <field name="x_permit2" placeholder="ចំណារតំណាងអគ្គនាយក......." class="o_address_state" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <label for="x_permit_date2" string="" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                              <field name="x_permit_date2" class="o_address_state" attrs="{'invisible': [('x_form_apply_permit','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            </div>
                                        </div>
                                    </group>
                                    <group>
                                        <label for="permit_doc" string="54G Permit Doc"/>
                                        <div class="o_address_format">
                                            <field name="permit_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="permit_stamp" string="Shipper Stamp?" attrs="{'invisible': [('permit_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="permit_stamp" class="o_address_state" attrs="{'invisible': [('permit_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="permit_stamp_consignee" attrs="{'invisible': [('permit_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="permit_stamp_consignee" class="o_address_state" attrs="{'invisible': [('permit_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <field name="co_doc" string="54H CO Doc" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        <field name="co_attactment_doc" string="54I CO Attactment Doc" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                    </group>
                                    <group>
                                        <button class="btn btn-primary" name="action_import_download_all" type="object" string="Download"></button>
                                    </group>
                                </group>
                                <group string="Transit Documents" attrs="{'invisible': [('operation_type','!=','transit')]}">
                                    <group>
                                        <label for="transit_inv_packing_doc" string="52 Inv Packing List"/>
                                        <div class="o_address_format">
                                            <field name="transit_inv_packing_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="inv_pl_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp" class="o_address_state" attrs="{'invisible': [('transit_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="inv_pl_stamp_consignee" attrs="{'invisible': [('transit_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <label for="draft_bl" string="53 Draft BL"/>
                                        <div class="o_address_format">
                                            <field name="draft_bl" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="draft_bl_stamp" string="Shipper Stamp?" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="draft_bl_stamp" class="o_address_state" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="draft_bl_stamp_consignee" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="draft_bl_stamp_consignee" class="o_address_state" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="transit_truck_bill_doc" string="53A Truck Bill"/>
                                        <div class="o_address_format">
                                            <field name="transit_truck_bill_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="truck_bill_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="truck_bill_stamp_consignee" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <label for="transit_authorization_doc" string="54 AUTH Broker"/>
                                        <div class="o_address_format">
                                            <field name="transit_authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_broker_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_broker_stamp_consignee" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="authorization_doc" string="54A AUTH Trader"/>
                                        <div class="o_address_format">
                                            <field name="authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_trader_stamp" string="Shipper Stamp?" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_trader_stamp_consignee" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp_consignee" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <field name="owner_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54B Company's owner"/>
                                        <field name="authorized_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54C AUTH Employee"/>
                                        <field name="customs_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54D Customs Border"/>
                                    </group>
                                    <group>
                                        <label for="province_id" string="54E Province(ធ្វើនៅ)" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        <div class="o_row" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}">
                                            <field name="province_id" placeholder="Province" attrs="{'readonly': [('is_locked', '=', True)]}" string="54E Province(ធ្វើនៅ)"/>
                                            <field name="document_date" placeholder="Date" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="khmer_date_char" string="54F Khmer Date" placeholder="Eg. ថ្ងៃសុក្រ ៩កើត ខែផល្គុន ឆ្នាំឆ្លូវ ត្រី​ស័ក, ព.ស.​ ២៥៦៥"
                                            attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                    </group>
                                    <group>
                                        <button class="btn btn-primary" name="action_transit_download_all" type="object" string="Download"></button>
                                    </group>
                                </group>
                                <group string="Export Documents" attrs="{'invisible': [('operation_type','!=','export')]}">
                                    <group>
                                        <field name="booking_order_doc" attrs="{'readonly': [('is_locked', '=', True)]}" string="51E Booking Order Doc"/>
                                        <label for="export_inv_packing_doc" string="52 Inv Packing List"/>
                                        <div class="o_address_format">
                                            <field name="export_inv_packing_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="inv_pl_stamp" string="Shipper Stamp?" attrs="{'invisible': [('export_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp" class="o_address_state" attrs="{'invisible': [('export_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="inv_pl_stamp_consignee" attrs="{'invisible': [('export_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="inv_pl_stamp_consignee" class="o_address_state" attrs="{'invisible': [('export_inv_packing_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="draft_bl" string="53 Draft BL"/>
                                        <div class="o_address_format">
                                            <field name="draft_bl" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="draft_bl_stamp" string="Shipper Stamp?" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="draft_bl_stamp" class="o_address_state" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="draft_bl_stamp_consignee" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="draft_bl_stamp_consignee" class="o_address_state" attrs="{'invisible': [('draft_bl','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <label for="transit_truck_bill_doc" string="53A Truck Bill"/>
                                        <div class="o_address_format">
                                            <field name="transit_truck_bill_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="truck_bill_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="truck_bill_stamp_consignee" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="truck_bill_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_truck_bill_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <label for="authorization_doc" string="54 AUTH Trader"/>
                                        <div class="o_address_format">
                                            <field name="authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_trader_stamp" string="Shipper Stamp?" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_trader_stamp_consignee" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_trader_stamp_consignee" class="o_address_state" attrs="{'invisible': [('authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <field name = "x_select_auth"/>
                                        </div>

                                        <label for="transit_authorization_doc" string="54A AUTH Broker"/>
                                        <div class="o_address_format">
                                            <field name="transit_authorization_doc" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="auth_broker_stamp" string="Shipper Stamp?" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="auth_broker_stamp_consignee" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="auth_broker_stamp_consignee" class="o_address_state" attrs="{'invisible': [('transit_authorization_doc','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>

                                        <field name="owner_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False), ('guaranteed_letter', '=', False), ('export_requirement_letter', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54B Company's Owner"/>
                                        <field name="authorized_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54C AUTH Employee"/>
                                        <field name="customs_emp_id" attrs="{'invisible': [('transit_authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}" options='{"no_quick_create": True}' string="54D Customs Borker"/>
                                        <label for="province_id" string="54E Province(ធ្វើនៅ)" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        <div class="o_row" attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}">
                                            <field name="province_id" placeholder="Province" attrs="{'readonly': [('is_locked', '=', True)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="document_date" placeholder="Date" attrs="{'readonly': [('is_locked', '=', True)], 'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <field name="khmer_date_char" string="54F Khmer Date" placeholder="Eg. ថ្ងៃសុក្រ ៩កើត ខែផល្គុន ឆ្នាំឆ្លូវ ត្រី​ស័ក, ព.ស.​ ២៥៦៥"
                                            attrs="{'invisible': [('transit_authorization_doc', '=', False), ('authorization_doc', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                    </group>
                                    <group>
                                        <label for="export_requirement_letter" string="54G Requirement Letter"/>
                                        <div class="o_address_format">
                                            <field name="export_requirement_letter" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="req_letter_stamp" string="Shipper Stamp?" attrs="{'invisible': [('export_requirement_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="req_letter_stamp" class="o_address_state" attrs="{'invisible': [('export_requirement_letter','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="req_letter_stamp_consignee" attrs="{'invisible': [('export_requirement_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="req_letter_stamp_consignee" class="o_address_state" attrs="{'invisible': [('export_requirement_letter','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <label for="company_type" attrs="{'invisible': [('export_requirement_letter', '=', False), ('guaranteed_letter', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        <div class="o_address_format">
                                            <field name="company_type" class="o_address_city" attrs="{'invisible': [('export_requirement_letter', '=', False), ('guaranteed_letter', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <span class="oe_read_only"> |  </span>
                                            <label for="commodity_source" class="o_address_state" attrs="{'invisible': [('export_requirement_letter', '=', False), ('guaranteed_letter', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <span class="oe_read_only">: </span>
                                            <field name="commodity_source" class="o_address_city" attrs="{'invisible': [('export_requirement_letter', '=', False), ('guaranteed_letter', '=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="guaranteed_letter" string="54H Guaranteed Letter"/>
                                        <div class="o_address_format">
                                            <field name="guaranteed_letter" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="gua_letter_stamp" string="Shipper Stamp?" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="gua_letter_stamp" class="o_address_state" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="gua_letter_stamp_consignee" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="gua_letter_stamp_consignee" class="o_address_state" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="x_verify_sign" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="x_verify_sign" class="o_address_state" attrs="{'invisible': [('guaranteed_letter','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                        </div>
                                        <label for="vgm" string="54I VGM"/>
                                        <div class="o_address_format">
                                            <field name="vgm" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="vgm_stamp" string="Shipper Stamp?" attrs="{'invisible': [('vgm','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="vgm_stamp" class="o_address_state" attrs="{'invisible': [('vgm','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="vgm_stamp_consignee" attrs="{'invisible': [('vgm','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="vgm_stamp_consignee" class="o_address_state" attrs="{'invisible': [('vgm','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <field name="inspection_doc" string="54J Inspection"/>
                                        <label for="list_of_container" string="54K List Of Container"/>
                                        <div class="o_address_format">
                                            <field name="list_of_container" class="o_address_city" attrs="{'readonly': [('is_locked', '=', True)]}"/>
                                            <label for="list_cont_stamp" string="Shipper Stamp?" attrs="{'invisible': [('list_of_container','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="list_cont_stamp" class="o_address_state" attrs="{'invisible': [('list_of_container','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                            <label for="list_cont_stamp_consignee" attrs="{'invisible': [('list_of_container','=', False)], 'readonly': [('is_locked', '=', True)]}"/>
                                            <field name="list_cont_stamp_consignee" class="o_address_state" attrs="{'invisible': [('list_of_container','=', False)], 'readonly': [('is_locked', '=', True)]}" />
                                        </div>
                                        <field name="inspection_fixed_doc" attrs="{'readonly': [('is_locked', '=', True)]}" string="54L Inspection Fixed Doc"/>
                                    </group>
                                    <group>
                                        <button class="btn btn-primary" name="action_export_download_all" type="object" string="Download"></button>
                                    </group>
                                </group>
                            </page>

                            <!-- Empty page red color  | To make page even for styling purpose -->
                            <page string="Empty Page" attrs="{'invisible': [('operation_type','in',('import', 'export', 'transit'))]}"></page>

                            <!-- Internal Note Lines -->
                            <page string="Internal Notes" name="internal_note_lines">
                                <field name="internal_note_lines">
                                    <tree editable="bottom">
                                        <field name="shipment_id" invisible="1"/>
                                        <field name="description" widget="text"/>
                                        <field name="create_uid"/>
                                        <field name="create_date"/>
                                        <field name="note_remark"/>
                                        <field name="write_uid" optional="hide"/>
                                        <field name="write_date" optional="hide"/>
                                    </tree>
                                </field>
                            </page>

                            <!-- Expense Line for Import and Transit -->
                            <page string="Expense Lines" name="expense_line"
                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <group class="oe_edit_only">
                                    <group>
                                        <field name="copy_expense_line_id" domain="[('active', '=', True),('operation_type', '=', operation_type)]" options="{'no_open': True, 'no_create_edit': True, 'no_quick_create': True}"
                                            context="{
                                                'show_commodity': 1,
                                                'show_client_name': 1,
                                                'search_view_ref': 'devel_logistic_management.view_shipment_operation_search',
                                                'tree_view_ref': 'devel_logistic_management.view_shipment_operation_tree'}"/>
                                    </group>
                                </group>
                                <group col="10">
                                    <group colspan="3" col="3">
                                        <field name="cover_file" string="Cover File Shipment"/>
                                    </group>
                                    <group colspan="3" col="3">
                                        <field name="cash_payment" string="Cash Payment Request"/>
                                    </group>
                                    <group colspan="3" col="3">
                                        <field name="closing_file" string="Closing File Shipment"/>
                                    </group>
                                    <div class="mr-1 dvl-class oe_right oe_button_box" name="buttons">
                                        <button type="object" name="action_preview_accounting_documents" string="Preview" icon="fa-search"/>
                                        <button class="btn btn-primary" name="action_accounting_download_all" type="object" string="Download"
                                            attrs="{'invisible': [('cover_file','=',False), ('cash_payment','=',False), ('closing_file','=',False)]}"/>
                                    </div>
                                </group>
                                <!-- Customs Valuation / Permit | hide for transit operation -->
                                <group attrs="{'invisible': [('operation_type','=','transit')]}">
                                    <separator coslpan="4" string="Customs Valuation Office" attrs="{'invisible': [('operation_type','!=','import')]}"/>
                                    <separator coslpan="4" string="Customs Permit" attrs="{'invisible': [('operation_type','!=','export')]}"/>
                                    <separator coslpan="4" string="Valuation/Permit" attrs="{'invisible': [('operation_type','!=','transit')]}"/>
                                    <field name="expense_custom_permit_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_customs_office_permit">
                                        <tree editable="bottom" class="expense_line dvl_left" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>
                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_custom_permit_lines"/>
                                        <field name="total_custom_permit_amount" string="Total Paid"/>
                                    </group>
                                </group>
                                <!-- shipping line -->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'export'))]}">
                                    <separator coslpan="4" string="Shipping Line"/>
                                    <field name="expense_shipping_line_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_shipping_line">
                                        <tree string="Shipping Line" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="thc_amount" widget="toggle_button"  groups="account.group_account_user" nolabel="1"/>
                                            <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'" decoration-muted="state == 'reject'" decoration-success="state == 'paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group>
                                        <field name="company_currency_id" invisible='1'/>
                                        <label for="total_deposit_amount"/>
                                        <div class="o_address_format">
                                            <field name="total_deposit_amount" widget="monetary"
                                                options="{'currency_field': 'company_currency_id'}" class="o_address_city"/>
                                            <field name="container_deposit_date" readonly="1"  class="o_address_state"/>
                                        </div>
                                        <field name="container_deposit_move_id" readonly="1" invisible="1"/>
                                        <button class="btn-sm btn-primary" name="%(action_container_deposit)d" string="Add To Shipping Line" type="action"
                                            attrs="{'invisible': ['|',('container_deposit_date','!=',False),('total_deposit_amount','=', 0)]}"/>
                                    </group>
                                    <group>
                                        <label for="refund_container_deposit_amount"/>
                                        <div class="o_address_format">
                                            <field name="refund_container_deposit_amount" widget="monetary"
                                                options="{'currency_field': 'company_currency_id'}" class="o_address_city"/>
                                            <field name="refund_container_deposit_date" readonly="1"  class="o_address_state"/>
                                        </div>
                                        <field name="deposit_and_refund_amount_equal" invisible="1"/>
                                        <button class="btn-sm btn-primary" name="%(action_container_refund_deposit)d" string="Refund Deposit Container" type="action"
                                            attrs="{'invisible': ['|',('deposit_and_refund_amount_equal', '=', True),('total_deposit_amount','=', 0)]}" context="{'refund_deposit_container':1}"/>
                                        <field name="refund_container_remain_amount" attrs="{'invisible': [('refund_container_remain_amount','=',0)]}"/>
                                        <field name="refund_container_deposit_move_ids" widget="many2many_tags" readonly="1" invisible="1"/>
                                    </group>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_shipping_line_lines"/>
                                        <field name="total_shipping_line_amount" string="Total Paid"/>
                                    </group>
                                </group>
                                <!-- Customs Duty-->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'export'))]}">
                                    <separator coslpan="4" string="Customs Duty"/>
                                    <field name="expense_custom_duty_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_custom_duty">
                                        <tree editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="duty_tax" widget="toggle_button"  groups="account.group_account_user" nolabel="1"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group>
                                        <label for="total_tax_amount" string="Tax Amount"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': [('total_tax_amount','=', 0)]}" context="{'tax_amount':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                        <label for="total_tax_amount_co" string="Cutoff Tax Amount CO"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount_co" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': [('total_tax_amount_co','=', 0)]}" context="{'tax_amount_co':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                    </group>
                                    <group>
                                        <label for="total_duty_tax"/>
                                        <div class="o_address_format">
                                            <field name="total_duty_tax" class="o_address_city"/> |
                                            <label for="customs_exchange_rate" string="Exchange Rate"/>
                                            <field name="customs_exchange_rate" class="o_address_zip" placeholder="Customs Exchange Rate"/>
                                        </div>
                                        <field name="total_duty_tax_khr" string="Duty Tax in KHR"/>
                                        <field name="tot_custom_duty_lines" invisible="1"/>
                                        <field name="total_custom_duty_amount" string="Total Paid USD" invisible="1"/>
                                    </group>
                                </group>
                                <!-- Clearance | hide from export operation -->
                                <group attrs="{'invisible': [('operation_type','in',('export'))]}">
                                    <separator coslpan="4" string="Clearance"/>
                                    <field name="expense_clearance_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_clearance">
                                        <tree string="Clearance" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_clearance_lines"/>
                                        <field name="total_clearance_amount" string="Total Paid"/>
                                    </group>
                                </group>
                                <!-- Port Charge-->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'export'))]}">
                                    <separator coslpan="4" string="Port Charge"/>
                                    <field name="expense_port_charge_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_port_charge">
                                        <tree string="Port Charge" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_port_charge_lines"/>
                                        <field name="total_port_charge_amount" string="Total Paid"/>
                                    </group>
                                </group>
                                <!-- Trucking  -->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'export'))]}">
                                    <separator coslpan="4" string="Trucking"/>
                                    <field name="expense_trucking_line_ids" context="{'default_requester_user_id': uid, 'default_shipment_id': id,}" widget="selectable_trucking">
                                        <tree string="Trucking" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="container_id" optional="show" />
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_trucking_lines"/>
                                        <field name="total_trucking_amount" string="Total Paid"/>
                                    </group>
                                </group>
                                <!-- Other admin-->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'export'))]}">
                                    <separator coslpan="4" string="Other Admin Expenses"/>
                                    <field name="expense_other_admin_line_ids" force_save="1" context="{'default_requester_user_id': uid}" widget="selectable_other_admin">
                                        <tree string="Other Admin Expenses" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_other_admin_lines"/>
                                        <field name="total_other_admin_amount" string="Total Paid"/>
                                    </group>
                                </group>

                                <!-- For Export Operation | position are different from Import-->
                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Clearance"/>
                                    <field name="expense_clearance_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_clearance">
                                        <tree string="Clearance" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_clearance_lines"/>
                                        <field name="total_clearance_amount" string="Total Paid"/>
                                    </group>
                                </group>

                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Trucking"/>
                                    <field name="expense_trucking_line_ids" context="{'default_requester_user_id': uid, 'default_shipment_id': id}" widget="selectable_trucking">
                                        <tree string="Trucking" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="container_id" optional="show"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_trucking_lines"/>
                                        <field name="total_trucking_amount" string="Total Paid"/>
                                    </group>
                                </group>

                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Shipping Line"/>
                                    <field name="expense_shipping_line_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_shipping_line">
                                        <tree string="Shipping Line" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="thc_amount" widget="toggle_button"  groups="account.group_account_user" nolabel="1"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group>
                                        <field name="company_currency_id" invisible='1'/>
                                        <label for="total_deposit_amount"/>
                                        <div class="o_address_format">
                                            <field name="total_deposit_amount" widget="monetary"
                                                options="{'currency_field': 'company_currency_id'}" class="o_address_city"/>
                                            <field name="container_deposit_date" readonly="1"  class="o_address_state"/>
                                        </div>
                                        <field name="container_deposit_move_id" readonly="1" invisible="1"/>
                                        <button class="btn-sm btn-primary" name="%(action_container_deposit)d" string="Add To Shipping Line" type="action"
                                            attrs="{'invisible': ['|',('container_deposit_date','!=',False),('total_deposit_amount','=', 0)]}"/>
                                    </group>
                                    <group>
                                        <label for="refund_container_deposit_amount"/>
                                        <div class="o_address_format">
                                            <field name="refund_container_deposit_amount" widget="monetary"
                                                options="{'currency_field': 'company_currency_id'}" class="o_address_city"/>
                                            <field name="refund_container_deposit_date" readonly="1"  class="o_address_state"/>
                                        </div>
                                        <field name="deposit_and_refund_amount_equal" invisible="1"/>
                                        <button class="btn-sm btn-primary" name="%(action_container_refund_deposit)d" string="Refund Deposit Container" type="action"
                                            attrs="{'invisible': ['|',('deposit_and_refund_amount_equal','=',True),('total_deposit_amount','=', 0)]}" context="{'refund_deposit_container':1}"/>
                                        <field name="refund_container_remain_amount" attrs="{'invisible': [('refund_container_remain_amount','=',0)]}"/>
                                        <field name="refund_container_deposit_move_ids" widget="many2many_tags" readonly="1" invisible="1"/>
                                    </group>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_shipping_line_lines"/>
                                        <field name="total_shipping_line_amount" string="Total Paid"/>
                                    </group>
                                </group>

                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Customs Duty"/>
                                    <field name="expense_custom_duty_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_custom_duty">
                                        <tree editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="duty_tax" widget="toggle_button"  groups="account.group_account_user" nolabel="1"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group>
                                        <label for="total_tax_amount" string="Tax Amount"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': [('total_tax_amount','=', 0)]}" context="{'tax_amount':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                        <label for="total_tax_amount_co" string="Cutoff Tax Amount CO"/>
                                        <div class="o_address_format">
                                            <field name="total_tax_amount_co" class="o_address_city" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_tax_amount)d" string="Add" type="action"
                                                attrs="{'invisible': [('total_tax_amount_co','=', 0)]}" context="{'tax_amount_co':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                    </group>
                                    <group>
                                        <label for="total_duty_tax"/>
                                        <div class="o_address_format">
                                            <field name="total_duty_tax" class="o_address_city"/> |
                                            <label for="customs_exchange_rate" string="Exchange Rate"/>
                                            <field name="customs_exchange_rate" class="o_address_zip" placeholder="Customs Exchange Rate"/>
                                        </div>
                                        <field name="total_duty_tax_khr" string="Duty Tax in KHR"/>
                                        <field name="tot_custom_duty_lines" invisible="1"/>
                                        <field name="total_custom_duty_amount" string="Total Paid USD" invisible="1"/>
                                    </group>
                                </group>

                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Clearance Port Charge"/>
                                    <field name="expense_port_charge_line_ids" context="{'default_requester_user_id': uid}" widget="selectable_port_charge">
                                        <tree string="Port Charge" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_port_charge_lines"/>
                                        <field name="total_port_charge_amount" string="Total Paid"/>
                                    </group>
                                </group>

                                <group attrs="{'invisible': [('operation_type','in',('transit', 'import'))]}">
                                    <separator coslpan="4" string="Other Admin Expenses"/>
                                    <field name="expense_other_admin_line_ids" force_save="1" context="{'default_requester_user_id': uid}" widget="selectable_other_admin">
                                        <tree string="Other Admin Expenses" editable="bottom" class="expense_line" decoration-bg-purple="id == False">
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="sequence" widget="handle"/>
                                            <field name="account_id"
                                                groups="account.group_account_readonly"
                                                options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="description" widget="text" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="uom_id" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'show_full_name': 1}" options="{'no_create': True}" class="o_list_number_th"/>
                                            <field name="currency_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                                            <field name="rate" string="Rate" optional="show"/>
                                            <field name="unit_price" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="sub_total" string="Sub Total USD" sum="Sub Total USD"/>
                                            <field name="state" attrs="{'readonly': [('state', '!=', 'draft')]}" widget="badge"
                                                    decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-danger="state == 'validate'"
                                                    decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'"/>
                                            <field name="clear_advance" optional="hide"/>
                                            <field name="reason" optional="hide"/>

                                            <button class="oe_read_only" string="Confirm" icon="fa-check" name="action_confirm" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_confirm_expense" states="draft" />

                                            <button class="oe_read_only" string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm" />

                                            <button class="oe_read_only" string="Reject" icon="fa-thumbs-down" name="%(devel_logistic_management.expense_line_reject_action)d" type="action"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="confirm"/>

                                            <field name="remark_expense" optional="show" widget="text"/>
                                            <field class="oe_read_only" name="attachment_number" nolabel="1" optional="hide"/>
                                            <button class="oe_read_only" name="action_get_attachment_view" string="Attachments" type="object" icon="fa-paperclip" />
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="requested_date" optional="show" string="Date Requested" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="checked_user_id" optional="show" />
                                            <field name="checked_date" optional="show" string="Date Checked" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="approver_user_id" optional="show" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_user_id" optional="show" />
                                            <field name="received_user_id" optional="show" domain="[('active', '=', True)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="paid_date" optional="show" string="Date Paid" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_right" invisible="1">
                                        <field name="tot_other_admin_lines"/>
                                        <field name="total_other_admin_amount" string="Total Paid"/>
                                    </group>
                                </group>
                            </page>

                            <!-- Empty page Green color | To make page even for styling purpose -->
                            <page string="Empty Page" attrs="{'invisible': [('operation_type','in',('import', 'export', 'transit'))]}"></page>

                            <page string="Cash Advance" name="cash_advance_line" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user">
                                <group>
                                    <field name="cash_advance_line_ids" context="{'default_requester_user_id': uid, 'default_shipment_id': id}" widget="selectable_cash_advance_payment">
                                        <tree editable="bottom">
                                            <field name="company_id" invisible="1"/>
                                            <field name="shipment_id" invisible="1"/>
                                            <field name="request_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="requester_user_id" optional="show" force_save="1"/>
                                            <field name="account_id" groups="account.group_account_user"
                                                options="{'no_create': True}" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="description" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="qty" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="unit_price" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="sub_total" sum="sub_total"/>
                                            <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-danger="state in ('validate')"
                                                decoration-muted="state == 'reject'" decoration-success="state == 'paid'" decoration-orange="state == 'direct_paid'" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <button string="Approve" icon="fa-thumbs-up" name="action_approve" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="draft"/>
                                            <button string="Reject" icon="fa-thumbs-down" name="action_reject" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager" states="draft"/>
                                            <button string="Draft" icon="fa-edit" name="action_draft" type="object"
                                                groups="devel_logistic_management.group_dvl_operation_manager"/>
                                            <field name="received_user_id" optional="show" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="approver_user_id" optional="show" attrs="{'readonly':[('state','!=','draft')]}" />
                                            <field name="approved_date" optional="show" string="Date Approved" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                            <field name="advance_date" optional="show" attrs="{'readonly':[('state','!=','draft')]}"/>
                                            <field name="advance_user_id" optional="show" attrs="{'readonly':[('state','!=','draft')]}"/>
                                        </tree>
                                    </field>
                                    <group class="oe_subtotal_footer oe_right" colspan="2" name="advance_total">
                                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                            <label for="total_cash_advance_amount"/>
                                        </div>
                                        <field name="total_cash_advance_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                                        <field name="total_cash_advance_paid" class="oe_subtotal_footer_separator"/>
                                        <field name="total_cash_advance_cleared" class="oe_subtotal_footer_separator"/>
                                        <label for="total_cash_advance_remaining"/>
                                        <div class="o_row">
                                            <field name="total_cash_advance_remaining" class="oe_subtotal_footer_separator"/>
                                            <button class="btn-sm btn-primary o_address_city" name="%(action_clear_advance_remaining_amount)d" string="Clear Remaining" type="action"
                                                attrs="{'invisible': ['|', ('total_cash_advance_remaining','&lt;', 0),('total_cash_advance_remaining','=', 0)]}" context="{'remaining_advance_amount':1, 'more_advance_amount':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>

                                            <button class="btn-sm btn-primary o_address_city" name="%(action_add_advance_remaining_amount)d" string="Add More Advance" type="action"
                                                attrs="{'invisible': ['|', ('total_cash_advance_remaining','&gt;', 0),('total_cash_advance_remaining','=', 0)]}" context="{'remaining_advance_amount':1, 'less_advance_amount':1}"
                                                groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                                        </div>
                                    </group>
                                </group>
                            </page>

                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers"/>
                      <field name="activity_ids" widget="mail_activity"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="view_shipment_operation_tree" model="ir.ui.view">
            <field name="name">shipment operation tree</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <tree class="dvl_global shipment_list_view" sample="1" decoration-warning="cv_1 == True" decoration-success="submit == True" decoration-bg-pink="is_partially_paid == True" decoration-danger="is_fully_paid == True">
                    <field name="cv_1" invisible="1"/>
                    <field name="submit" invisible="1"/>
                    <field name="received_payment_date" invisible="1"/>
                    <field name="is_partially_paid" invisible="1" groups="account.group_account_manager"/>
                    <field name="is_fully_paid" invisible="1" groups="account.group_account_manager"/>
                    <field name="stage_id" optional="show"/>
                    <field name="name"/>
                    <field name="id" widget="open_tab" width="0.5" nolabel="1"/>
                    <field name="date"/>
                    <field name="commodity" widget="text"/>
                    <field name="container_number" widget="text" class="o_list_number_th"/>
                    <field name="seal_number" optional="show" readonly="1" widget="text" class="o_list_number_th"/>
                    <field name="container_qty_type" optional="show" class="o_list_number_th"/>
                    <field name="internal_note" widget="dynamic_popover_text" options="{'max_width': '350px'}" optional="show" class="dvl-bg-light-orange"/>
                    <field name="total_estimated_tax_amount" string="Estimated Tax" optional="show"
                        widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                    <field name="shipper_id"/>
                    <field name="consignee_id"/>
                    <field name="customer_id"/>
                    <field name="incoterm_id" optional="show"/>
                    <field name="import_country_id" invisible="context.get('default_operation_type') != 'export'" />
                    <field name="origin_country_id" invisible="context.get('default_operation_type') == 'export'" />
                    <field name="etd" optional="show"/>
                    <field name="eta" optional="show"/>
                    <field name="etr" optional="show"/>
                    <field name="place_of_reciept" optional="show"/>
                    <field name="port_of_loading_report" string="Port Of Loading" optional="show"/>
                    <field name="port_of_discharge_report" string="Port Of Discharge" optional="show"/>
                    <field name="port_of_delivery" optional="show"/>
                    <field name="final_destination" invisible="context.get('default_operation_type') != 'export'"/>
                    <field name="co_loader_id" optional="show" string="Co-loader" invisible="1"/>
                    <field name="shipping_line_id" optional="show"/>
                    <field name="bl_number" optional="show"/>
                    <field name="hbl_number" invisible="1"/>
                    <field name="operation_type" invisible="1"/>
                    <field name="transportation_mode" optional="hide"/>
                    <field name="company_id" groups="base.group_multi_company" optional="hide"/>
                    <field name="company_currency_id" invisible='1'/>
                </tree>
            </field>
        </record>

        <!-- Shipment Kanban Quick Create View -->
        <record id="quick_create_shipment_form" model="ir.ui.view">
            <field name="name">shipment.form.quick_create</field>
            <field name="model">operation.shipment</field>
            <field name="priority">1000</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="operation_type" string='Operation Type' attrs="{'required': [('id', '=', False)]}"/>
                        <field name="transportation_mode"/>
                        <field name="shipment_type_id"/>
                        <field name="customer_id" attrs="{'required': [('id', '=', False)]}"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- Shipment Kanban View -->
        <record model="ir.ui.view" id="shipment_operation_kanban_view">
            <field name="name">shipment.operation.kanban</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <kanban default_group_by="stage_id" class="o_kanban_small_column o_opportunity_kanban"
                on_create="quick_create" quick_create_view="devel_logistic_management.quick_create_shipment_form"
                archivable="false" sample="1">
                    <field name="stage_id" options='{"group_by_tooltip": {"requirements": "Description"}}'/>
                    <field name="create_uid"/>
                    <field name="name"/>
                    <field name="date"/>
                    <field name="commodity"/>
                    <field name="shipper_id"/>
                    <field name="consignee_id"/>
                    <field name="origin_country_id"/>
                    <field name="etd"/>
                    <field name="eta"/>
                    <field name="port_of_delivery"/>
                    <field name="shipping_line_id"/>
                    <field name="bl_number"/>
                    <field name="hbl_number"/>
                    <field name="permit_doc" string="Permit"/>
                    <field name="co_doc" string="CO"/>
                    <field name="incoterm_id"/>
                    <field name="operation_type"/>
                    <field name="transportation_mode"/>
                    <field name="company_id" groups="base.group_multi_company" optional="hide"/>
                    <field name="activity_state" />
                    <field name="activity_ids" />
                    <field name="company_currency_id" invisible="1"/>
                    <field name="balance" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
                    <progressbar field="activity_state" colors='{"planned": "success", "today": "warning", "overdue": "danger"}' sum_field="balance" help="This bar allows to filter the shipment based on scheduled activities."/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">

                                <div class="oe_kanban_content">
                                    <div class="o_kanban_record_title" attrs="{'invisible': [('operation_type', '!=', 'import')]}">
                                        <strong><field name="name"/><t t-if="record.commodity.raw_value">: </t> <field name="commodity"/> <t t-if="record.origin_country_id.raw_value"> from </t><field name="origin_country_id"/></strong>
                                    </div>
                                    <div class="o_kanban_record_title" attrs="{'invisible': [('operation_type', '!=', 'export')]}">
                                        <strong><field name="name"/><t t-if="record.commodity.raw_value">: </t> <field name="commodity"/> <t t-if="record.import_country_id.raw_value"> to </t><field name="import_country_id"/></strong>
                                    </div>
                                    <div class="o_kanban_record_title" attrs="{'invisible': [('operation_type', '!=', 'transit')]}">
                                        <strong><field name="name"/><t t-if="record.commodity.raw_value">: </t> <field name="commodity"/> <t t-if="record.export_country_id.raw_value"> from </t> <field name="export_country_id"/>  <t t-if="record.import_country_id.raw_value"> to </t><field name="import_country_id"/></strong>
                                    </div>
                                    <!--div class="o_kanban_record_subtitle">
                                        <t t-if="record.shipper_id.raw_value">Shipper: </t><span t-if="record.shipper_id.value" t-esc="record.shipper_id.value"/>
                                    </div-->
                                    <div class="o_kanban_record_subtitle">
                                        <t t-if="record.consignee_id.raw_value">Consignee: </t><span t-if="record.consignee_id.value" t-esc="record.consignee_id.value"/>
                                    </div>
                                    <div>
                                        <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                                    </div>
                                    <div class="o_kanban_record_bottom">
                                        <div class="oe_kanban_bottom_left">
                                            <t t-if="record.etd.raw_value">ETD: </t> <field name="etd"/>
                                            <t t-if="record.eta.raw_value">ETA: </t><field name="eta"/>
                                        </div>
                                    </div>
                                    <div class="o_kanban_record_bottom">
                                      <div class="oe_kanban_bottom_left">
                                            <field name="activity_ids" widget="kanban_activity"/>
                                        </div>
                                        <div class="oe_kanban_bottom_right">
                                            <field name="create_uid" widget="many2one_avatar_user"/>
                                        </div>
                                    </div>
                                    <t t-if="record.internal_note.raw_value">
                                        <div class="dvl-bg-light-orange" >
                                            <field name="internal_note"/>
                                        </div>
                                    </t>
                                </div>
                                <div class="oe_clear"/>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_shipment_operation_search" model="ir.ui.view">
            <field name="name">shipment operation search</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <search string="Search...">
                    <field name="name" string=" " filter_domain="['|','|','|','|','|','|','|',
                    ('name','ilike',self),
                    ('commodity','ilike',self),
                    ('line_ids.hs_code_id','ilike',self),
                    ('line_ids.description','ilike',self),
                    ('container_line_ids.container_number','ilike',self),
                    ('shipper_id','ilike',self),
                    ('consignee_id','ilike',self),
                    ('customer_id','ilike',self)]"/>
                    <field name="container_line_ids" string="Container N0." filter_domain="['|',
                    ('container_line_ids.container_number','ilike',self),
                    ('container_line_ids.container_seal_number','ilike',self)]"/>
                    <field name="commodity"/>
                    <field name="shipper_id"/>
                    <field name="consignee_id"/>
                    <field name="customer_id"/>
                    <field name="clearance_office_id" string="Port"
                    filter_domain="['|','|','|','|','|','|','|','|',
                    ('clearance_office_id','ilike',self),
                    ('clearance_office_id.code','ilike',self),
                    ('entry_exit_port_id','ilike',self),
                    ('valuation_office_id','ilike',self),
                    ('exit_port_id','ilike',self),
                    ('clearance_office_id.kh_name','ilike',self),
                    ('entry_exit_port_id.kh_name','ilike',self),
                    ('valuation_office_id.kh_name','ilike',self),
                    ('exit_port_id.kh_name','ilike',self)]"/>
                    <field name="origin_country_id" string="Country" filter_domain="['|','|',('origin_country_id','ilike',self),('import_country_id','ilike',self), ('export_country_id','ilike',self)]"/>
                    <separator/>
                    <filter string="Operations To Review" name="to_review" domain="['&amp;',('to_review', '=', True),('review_done', '=', False)]"/>
                    <separator/>
                    <filter string="Not Yet Issued Invoice" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="no_invoice_date" domain="[('issued_invoice_date', '=', False)]"/>
                    <filter string="No Invoice" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="no_invoice" domain="[('invoice_ids', '=', False)]"/>
                    <filter string="No Expense Lines" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="to_confirm" domain="['&amp;','&amp;','&amp;','&amp;','&amp;','&amp;',
                        ('expense_custom_permit_line_ids', '=', False),
                        ('expense_shipping_line_line_ids', '=', False),
                        ('expense_clearance_line_ids', '=', False),
                        ('expense_custom_duty_line_ids', '=', False),
                        ('expense_port_charge_line_ids', '=', False),
                        ('expense_trucking_line_ids', '=', False),
                        ('expense_other_admin_line_ids', '=', False)]"/>
                    <separator/>
                    <filter string="To Confirm" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="to_confirm" domain="['|','|','|','|','|','|',
                        ('expense_custom_permit_line_ids.state', '=', 'draft'),
                        ('expense_shipping_line_line_ids.state', '=', 'draft'),
                        ('expense_clearance_line_ids.state', '=', 'draft'),
                        ('expense_custom_duty_line_ids.state', '=', 'draft'),
                        ('expense_port_charge_line_ids.state', '=', 'draft'),
                        ('expense_trucking_line_ids.state', '=', 'draft'),
                        ('expense_other_admin_line_ids.state', '=', 'draft')]"/>
                    <filter string="To Approve" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="to_approve" domain="['|','|','|','|','|','|',
                        ('expense_custom_permit_line_ids.state', '=', 'confirm'),
                        ('expense_shipping_line_line_ids.state', '=', 'confirm'),
                        ('expense_clearance_line_ids.state', '=', 'confirm'),
                        ('expense_custom_duty_line_ids.state', '=', 'confirm'),
                        ('expense_port_charge_line_ids.state', '=', 'confirm'),
                        ('expense_trucking_line_ids.state', '=', 'confirm'),
                        ('expense_other_admin_line_ids.state', '=', 'confirm')]"/>
                    <separator/>
                    <filter string="To Pay" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="to_paid" domain="['|','|','|','|','|','|',
                        ('expense_custom_permit_line_ids.state', '=', 'validate'),
                        ('expense_shipping_line_line_ids.state', '=', 'validate'),
                        ('expense_clearance_line_ids.state', '=', 'validate'),
                        ('expense_custom_duty_line_ids.state', '=', 'validate'),
                        ('expense_port_charge_line_ids.state', '=', 'validate'),
                        ('expense_trucking_line_ids.state', '=', 'validate'),
                        ('expense_other_admin_line_ids.state', '=', 'validate')]"/>
                    <filter string="Paid" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="paid" domain="['|','|','|','|','|','|',
                        ('expense_custom_permit_line_ids.state', '=', 'paid'),
                        ('expense_shipping_line_line_ids.state', '=', 'paid'),
                        ('expense_clearance_line_ids.state', '=', 'paid'),
                        ('expense_custom_duty_line_ids.state', '=', 'paid'),
                        ('expense_port_charge_line_ids.state', '=', 'paid'),
                        ('expense_trucking_line_ids.state', '=', 'paid'),
                        ('expense_other_admin_line_ids.state', '=', 'paid')]"/>
                    <separator/>
                    <filter string="Rejected" groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"
                        name="rejected" domain="['|','|','|','|','|','|',
                        ('expense_custom_permit_line_ids.state', '=', 'reject'),
                        ('expense_shipping_line_line_ids.state', '=', 'reject'),
                        ('expense_clearance_line_ids.state', '=', 'reject'),
                        ('expense_custom_duty_line_ids.state', '=', 'reject'),
                        ('expense_port_charge_line_ids.state', '=', 'reject'),
                        ('expense_trucking_line_ids.state', '=', 'reject'),
                        ('expense_other_admin_line_ids.state', '=', 'reject')]"/>
                    <separator/>
                    <filter string="Completed Shipments" name="done" domain="[('stage_id.is_done', '=', True)]"/>
                    <separator/>
                    <filter string="Inactive Shipments" name="inactive" domain="[('active', '=', False)]"/>
                    <separator/>
                    <group expand="1" string="Group By">
                        <filter string="Clearance Office" name="clearance_office_id" context="{'group_by':'clearance_office_id'}"/>
                        <filter string="Valuation Office" name="valuation_office_id" context="{'group_by':'valuation_office_id'}"/>
                        <separator/>
                        <filter string="Client" name="customer_id" context="{'group_by':'customer_id'}"/>
                        <filter string="Invoice Date" name="revenue_invoice_date" context="{'group_by':'issued_invoice_date'}"
                            groups="devel_logistic_management.group_dvl_operation_manager,account.group_account_user"/>
                        <separator/>
                        <filter string="Operation Type" name="operation_type" context="{'group_by':'operation_type'}"/>
                        <filter string="User" name="user_id" context="{'group_by':'create_uid'}"/>
                        <filter string="Date" name="group_by_month" domain="[]" context="{'group_by':'date'}"/>
                        <separator/>
                        <filter string="Status" name="group_by_status" domain="[]" context="{'group_by':'stage_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="import_operation_calendar_view" model="ir.ui.view">
            <field name="name">Operation Shipment</field>
            <field name="model">operation.shipment</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar create="0" delete="0" mode="month" date_start="eta" color="create_uid" hide_time="true" event_limit="5">
                    <field name="date" string="Created Date"/>
                    <field name="commodity"/>
                    <field name="container_qty_type"/>
                    <field name="container_number"/>
                    <field name="volume_cbm" string="Volume"/>
                    <field name="origin_country_id"/>
                    <field name="etd"/>
                    <field name="eta"/>
                    <field name="etr"/>
                    <field name="consignee_id" avatar_field="image_128"/>
                    <field name="create_uid" filters="1" invisible="1"/>
                </calendar>
            </field>
        </record>

        <!--Action for Import Operations-->
        <record id="action_dvl_operation_import" model="ir.actions.act_window">
            <field name="name">Import Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">kanban,tree,form,calendar</field>
            <field name="domain">[('operation_type','=','import')]</field>
            <field name="context">{'default_operation_type': 'import'}</field>
            <field name="view_id" ref="view_shipment_operation_tree"/>
            <field name="search_view_id" ref="view_shipment_operation_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No Import Operation records. Let's create one!
              </p>
            </field>
        </record>
        <record id="action_operation_import_form_view1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="shipment_operation_kanban_view"/>
            <field name="act_window_id" ref="action_dvl_operation_import"/>
        </record>

        <record id="action_shipment_operation_view_calendar" model="ir.actions.act_window.view">
            <field name="sequence" eval="5"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="import_operation_calendar_view"/>
            <field name="act_window_id" ref="action_dvl_operation_import"/>
        </record>

        <menuitem id="dvl_import_menu" name="Imports"
            parent="devel_logistic_management.dvl_shipment_menu" action="action_dvl_operation_import" sequence="1"/>


        <!--Action for Export Operations-->
        <record id="export_operation_calendar_view" model="ir.ui.view">
            <field name="name">Operation Shipment</field>
            <field name="model">operation.shipment</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar create="0" delete="0" mode="month" date_start="etd" color="create_uid" hide_time="true" event_limit="5">
                    <field name="date" string="Created Date"/>
                    <field name="commodity"/>
                    <field name="container_qty_type"/>
                    <field name="container_number"/>
                    <field name="volume_cbm" string="Volume"/>
                    <field name="import_country_id"/>
                    <field name="etd"/>
                    <field name="eta"/>
                    <field name="etr"/>
                    <field name="consignee_id" avatar_field="image_128"/>
                    <field name="create_uid" filters="1" invisible="1"/>
                </calendar>
            </field>
        </record>

        <record id="action_dvl_operation_export" model="ir.actions.act_window">
            <field name="name">Export Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">kanban,tree,form,calendar</field>
            <field name="domain">[('operation_type','=','export')]</field>
            <field name="context">{'default_operation_type': 'export'}</field>
            <field name="view_id" ref="view_shipment_operation_tree"/>
            <field name="search_view_id" ref="view_shipment_operation_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No Export Operation records. Let's create one!
              </p>
            </field>
        </record>
        

        <record id="action_operation_export_kanban_view" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="shipment_operation_kanban_view"/>
            <field name="act_window_id" ref="action_dvl_operation_export"/>
        </record>

        <record id="action_shipment_operation_export_calendar" model="ir.actions.act_window.view">
            <field name="sequence" eval="5"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="export_operation_calendar_view"/>
            <field name="act_window_id" ref="action_dvl_operation_export"/>
        </record>

        <menuitem id="dvl_export_menu" name="Exports"
            parent="devel_logistic_management.dvl_shipment_menu" action="action_dvl_operation_export" sequence="2"/>

        <!--Action for Transit Operations-->
        <record id="transit_operation_calendar_view" model="ir.ui.view">
            <field name="name">Operation Shipment</field>
            <field name="model">operation.shipment</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar create="0" delete="0" mode="month" date_start="date" color="create_uid" hide_time="true" event_limit="5">
                    <field name="date" string="Created Date"/>
                    <field name="commodity"/>
                    <field name="container_qty_type"/>
                    <field name="container_number"/>
                    <field name="volume_cbm" string="Volume"/>
                    <field name="export_country_id"/>
                    <field name="import_country_id"/>
                    <field name="etd"/>
                    <field name="eta"/>
                    <field name="etr"/>
                    <field name="consignee_id" avatar_field="image_128"/>
                    <field name="create_uid" filters="1" invisible="1"/>
                </calendar>
            </field>
        </record>
        <record id="action_dvl_operation_transit" model="ir.actions.act_window">
            <field name="name">Transit Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">kanban,tree,calendar,form</field>
            <field name="domain">[('operation_type','=','transit')]</field>
            <field name="context">{'default_operation_type': 'transit'}</field>
            <field name="view_id" ref="view_shipment_operation_tree"/>
            <field name="search_view_id" ref="view_shipment_operation_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No Transit Operation records. Let's create one!
              </p>
            </field>
        </record>

        <record id="action_operation_transit_kanban_view" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="shipment_operation_kanban_view"/>
            <field name="act_window_id" ref="action_dvl_operation_transit"/>
        </record>

        <record id="action_shipment_operation_transit_calendar" model="ir.actions.act_window.view">
            <field name="sequence" eval="5"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="transit_operation_calendar_view"/>
            <field name="act_window_id" ref="action_dvl_operation_transit"/>
        </record>

        <menuitem id="dvl_transit_menu" name="Transit"
            parent="devel_logistic_management.dvl_shipment_menu" action="action_dvl_operation_transit" sequence="3"/>

        <!--Action for All Operations-->
        <record id="all_operation_calendar_view" model="ir.ui.view">
            <field name="name">Operation Shipment</field>
            <field name="model">operation.shipment</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar create="0" delete="0" mode="month" date_start="date" color="create_uid" hide_time="true" event_limit="5">
                    <field name="date" string="Created Date"/>
                    <field name="commodity"/>
                    <field name="container_qty_type"/>
                    <field name="container_number"/>
                    <field name="volume_cbm" string="Volume"/>
                    <field name="origin_country_id"/>
                    <field name="etd"/>
                    <field name="eta"/>
                    <field name="etr"/>
                    <field name="consignee_id" avatar_field="image_128"/>
                    <field name="create_uid" filters="1" invisible="1"/>
                </calendar>
            </field>
        </record>
        <record id="action_dvl_operation_all" model="ir.actions.act_window">
            <field name="name">All Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">tree,calendar,kanban,form</field>
            <field name="domain">[]</field>
            <field name="view_id" ref="view_shipment_operation_tree"/>
            <field name="search_view_id" ref="view_shipment_operation_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No Operation records. Let's create one!
              </p>
            </field>
        </record>

        <record id="action_shipment_operation_all_tree_mode" model="ir.actions.act_window.view">
            <field name="sequence" eval="0"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_shipment_operation_tree"/>
            <field name="act_window_id" ref="action_dvl_operation_all"/>
        </record>

        <record id="action_shipment_operation_all_calendar" model="ir.actions.act_window.view">
            <field name="sequence" eval="10"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="all_operation_calendar_view"/>
            <field name="act_window_id" ref="action_dvl_operation_all"/>
        </record>

        <menuitem id="dvl_all_operations_menu" name="All Operations"
            parent="devel_logistic_management.dvl_shipment_menu" action="action_dvl_operation_all" sequence="4"/>

        <!-- ################ Report Menu ################-->

        <!-- Report Operation Import Shipment-->
        <record id="view_report_shipment_import_operation" model="ir.ui.view">
            <field name="name">shipment report import operation tree</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <tree string="Report Import Operation" create="false" import="false" class="report_operation dvl_global">
                    <field name="name"/>
                    <button name="action_view_operation_from_report" type="object" icon="fa-list-alt"/>
                    <field name="date" optional="show"/>
                    <field name="commodity" optional="show" widget="text"/>
                    <field name="shipper_id" optional="show"/>
                    <field name="consignee_id" optional="show"/>
                    <field name="customer_id" optional="show"/>
                    <field name="port_of_loading_report" optional="show" string="Port Of Loading"/>
                    <field name="port_of_discharge_report" optional="show" string="Port Of Discharge"/>
                    <field name="port_of_delivery" optional="show"/>
                    <field name="final_destination" optional="hide"/>
                    <field name="container_qty_type" optional="show"/>
                    <field name="internal_note" widget="dynamic_popover_text" options="{'max_width': '350px'}" optional="show" class="dvl-bg-light-orange"/>
                    <field name="total_invoices" sum="Total Revenues" string="Revenues" optional="show"/>
                    <field name="tot_operation_expense" sum="Total Expenses" string="Expenses" optional="show" decoration-danger="tot_operation_expense &lt; 0"/>
                    <field name="total_reimbursed" sum="Total Reimbursed" string="Reimbursed" optional="show" decoration-danger="total_reimbursed &lt; 0" decoration-success="total_reimbursed &gt; 0"/>
                    <field name="balance" sum="Balance" optional="show" decoration-danger="balance &lt; 0" decoration-success="balance &gt; 0"/>
                    <button/>
                    <field name="total_cash_received" sum="Total Cash Received" string="Cash Received" optional="show"/>
                    <field name="total_expensed" sum="Total Cash Paid" string="Cash Paid" optional="show" decoration-danger="total_expensed &lt; 0"/>
                    <field name="cash_balance" sum="Total Cash Balance" optional="show" decoration-danger="cash_balance &lt; 0" decoration-success="cash_balance &gt; 0"/>
                    <field name="company_currency_id" invisible="1"/>
                </tree>
            </field>
        </record>
        <!-- Actions Report Import Operation -->
        <record id="dvl_report_import_operation_action" model="ir.actions.act_window">
            <field name="name">Monthly Import Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('operation_type','=','import')]</field>
            <field name="view_id" ref="view_report_shipment_import_operation"/>
            <field name="context">{'search_default_group_by_month': 1}</field>
        </record>

        <menuitem id="dvl_report_import_operations_menu" name="Import Operations"
            parent="devel_logistic_management.dvl_report_menu" action="devel_logistic_management.action_import_operation_shipment_report" sequence="1"/>

        <!-- Report Operation Export Shipment-->
        <record id="view_report_shipment_export_operation" model="ir.ui.view">
            <field name="name">shipment report export operation tree</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <tree string="Report Export Operation" create="false" import="false" class="report_operation dvl_global">
                    <field name="name"/>
                    <button name="action_view_operation_from_report" type="object" icon="fa-list-alt"/>
                    <field name="date" optional="show"/>
                    <field name="commodity" optional="show" widget="text"/>
                    <field name="shipper_id" optional="show"/>
                    <field name="consignee_id" optional="show"/>
                    <field name="customer_id" optional="show"/>
                    <field name="port_of_loading_report" optional="show" string="Port Of Loading"/>
                    <field name="port_of_discharge_report" optional="show" string="Port Of Discharge"/>
                    <field name="port_of_delivery" optional="hide"/>
                    <field name="final_destination" optional="show"/>
                    <field name="container_qty_type" optional="show"/>
                    <field name="internal_note" widget="dynamic_popover_text" options="{'max_width': '350px'}" optional="show" class="dvl-bg-light-orange"/>
                    <field name="total_invoices" sum="Total Revenues" string="Revenues" optional="show"/>
                    <field name="tot_operation_expense" sum="Total Expenses" string="Expenses" optional="show" decoration-danger="tot_operation_expense &lt; 0"/>
                    <field name="total_reimbursed" sum="Total Reimbursed" string="Reimbursed" optional="show" decoration-danger="total_reimbursed &lt; 0" decoration-success="total_reimbursed &gt; 0"/>
                    <field name="balance" sum="Balance" optional="show" decoration-danger="balance &lt; 0" decoration-success="balance &gt; 0"/>
                    <button/>
                    <field name="total_cash_received" sum="Total Cash Received" string="Cash Received" optional="show"/>
                    <field name="total_expensed" sum="Total Cash Paid" string="Cash Paid" optional="show" decoration-danger="total_expensed &lt; 0"/>
                    <field name="cash_balance" sum="Total Cash Balance" optional="show" decoration-danger="cash_balance &lt; 0" decoration-success="cash_balance &gt; 0"/>
                    <field name="company_currency_id" invisible="1"/>
                </tree>
            </field>
        </record>
        <!-- Actions Report Export Operation -->
        <record id="dvl_report_export_operation_action" model="ir.actions.act_window">
            <field name="name">Monthly Export Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('operation_type','=','export')]</field>
            <field name="view_id" ref="view_report_shipment_export_operation"/>
            <field name="context">{'search_default_group_by_month': 1}</field>
        </record>

        <menuitem id="dvl_report_export_operations_menu" name="Export Operations"
        parent="devel_logistic_management.dvl_report_menu" action="devel_logistic_management.action_export_operation_shipment_report" sequence="2"/>

        <!-- Report Transit Operation-->
        <record id="view_report_shipment_transit_operation" model="ir.ui.view">
            <field name="name">shipment report import operation tree</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <tree string="Report Transit Operation" create="false" import="false" class="report_operation dvl_global">
                    <field name="name"/>
                    <button name="action_view_operation_from_report" type="object" icon="fa-list-alt"/>
                    <field name="date" optional="show"/>
                    <field name="commodity" optional="show" widget="text"/>
                    <field name="shipper_id" optional="show"/>
                    <field name="consignee_id" optional="show"/>
                    <field name="customer_id" optional="show"/>
                    <field name="port_of_loading_report" optional="show" string="Port Of Loading"/>
                    <field name="port_of_discharge_report" optional="show" string="Port Of Discharge"/>
                    <field name="port_of_delivery" optional="show"/>
                    <field name="final_destination" optional="hide"/>
                    <field name="container_qty_type" optional="show"/>
                    <field name="internal_note" widget="dynamic_popover_text" options="{'max_width': '350px'}" optional="show" class="dvl-bg-light-orange"/>
                    <field name="total_invoices" sum="Total Revenues" string="Revenues" optional="show"/>
                    <field name="tot_operation_expense" sum="Total Expenses" string="Expenses" optional="show" decoration-danger="tot_operation_expense &lt; 0"/>
                    <field name="total_reimbursed" sum="Total Reimbursed" string="Reimbursed" optional="show" decoration-danger="total_reimbursed &lt; 0" decoration-success="total_reimbursed &gt; 0"/>
                    <field name="balance" sum="Balance" optional="show" decoration-danger="balance &lt; 0" decoration-success="balance &gt; 0"/>
                    <button/>
                    <field name="total_cash_received" sum="Total Cash Received" string="Cash Received" optional="show"/>
                    <field name="total_expensed" sum="Total Cash Paid" string="Cash Paid" optional="show" decoration-danger="total_expensed &lt; 0"/>
                    <field name="cash_balance" sum="Total Cash Balance" optional="show" decoration-danger="cash_balance &lt; 0" decoration-success="cash_balance &gt; 0"/>
                    <field name="company_currency_id" invisible="1"/>
                </tree>
            </field>
        </record>
        <!-- Actions Report Transit Operation -->
        <record id="dvl_report_transit_operation_action" model="ir.actions.act_window">
            <field name="name">Monthly Transit Operations</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('operation_type','=','transit')]</field>
            <field name="view_id" ref="view_report_shipment_transit_operation"/>
            <field name="context">{'search_default_group_by_month': 1}</field>
        </record>

        <menuitem id="dvl_report_transit_operations_menu" name="Transit Operations"
            parent="devel_logistic_management.dvl_report_menu" action="devel_logistic_management.action_transit_operation_shipment_report" sequence="3"/>

        <!-- Report Deposit Containers-->
        <record id="view_report_deposit_container" model="ir.ui.view">
            <field name="name">deposit container report tree</field>
            <field name="model">operation.shipment</field>
            <field name="arch" type="xml">
                <tree create="false" import="false"
                    decoration-success="total_deposit_amount ==refund_container_deposit_amount and refund_container_deposit_amount != 0.0 and total_deposit_amount != 0.0"
                    decoration-info="total_deposit_amount and refund_container_deposit_amount == 0.0"
                    decoration-danger="refund_container_deposit_amount &lt; total_deposit_amount and balance_refund_amount != total_deposit_amount"
                    decoration-muted="balance_refund_amount == 0.0 and total_deposit_amount == 0.0 and refund_container_deposit_amount == 0.0">
                    <field name="name"/>
                    <button name="action_read_operation_shipment" context="{'deposit_container_report':1}" type="object" icon="fa-list-alt"/>
                    <field name="bl_number" string="B/L N0."/>
                    <field name="container_number" string="Containers N0."/>
                    <field name="container_deposit_date"/>
                    <field name="total_deposit_amount" sum="Total Deposit" string="Deposit Amount"/>

                    <field name="refund_container_deposit_date"/>
                    <field name="refund_container_deposit_qty" sum="Refund QTY" string="Refund QTY"/>
                    <field name="refund_container_deposit_amount" sum="Total Refund Amount" string="Refund Amount"/>
                    <field name="balance_refund_amount" sum="Total Balance" string="Balance"/>

                </tree>
            </field>
        </record>

        <!-- Actions Deposit Container Report-->
        <record id="dvl_report_deposit_container_action" model="ir.actions.act_window">
            <field name="name">Deposit Container Report</field>
            <field name="res_model">operation.shipment</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('operation_type','=','import')]</field>
            <field name="view_id" ref="view_report_deposit_container"/>
            <field name="context">{'search_default_group_by_month': 1}</field>
        </record>

        <menuitem id="dvl_report_deposti_container_menu" name="Deposit Container"
            parent="devel_logistic_management.dvl_report_menu" action="dvl_report_deposit_container_action" sequence="5"/>
    </data>
</odoo>